{
  "comments": [
    {
      "key": {
        "uuid": "1a486d77_f77db1b2",
        "filename": "src/dpdk/dpdk.py",
        "patchSetId": 1
      },
      "lineNbr": 117,
      "author": {
        "id": 1306
      },
      "writtenOn": "2016-03-15T17:27:58Z",
      "side": 1,
      "message": "I\u0027m thinking about additional refactoring to get rid of both insert_vhost_modules and remove_vhost_modules. The idea is to enhance __init__ method to accept optional parameter, which will drive all vhost specific actions.\n\nI suggest to solve it as separate JIRA ticket.",
      "revId": "dc07339e70cce373b7948c01ec39a4fb06e5a8d9",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a486d77_f2ffffa8",
        "filename": "src/dpdk/dpdk.py",
        "patchSetId": 1
      },
      "lineNbr": 117,
      "author": {
        "id": 304
      },
      "writtenOn": "2016-03-16T13:46:41Z",
      "side": 1,
      "message": "sounds good",
      "parentUuid": "1a486d77_f77db1b2",
      "revId": "dc07339e70cce373b7948c01ec39a4fb06e5a8d9",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a486d77_d74ab582",
        "filename": "src/dpdk/dpdk.py",
        "patchSetId": 1
      },
      "lineNbr": 125,
      "author": {
        "id": 1306
      },
      "writtenOn": "2016-03-15T17:27:58Z",
      "side": 1,
      "message": "It seems, that this code is obsoleted. It should be checked if vhost-net module is still used by vHost scenarios.\n\nI suggest to raise a separate JIRA ticket to solve it together with refactoring above.",
      "revId": "dc07339e70cce373b7948c01ec39a4fb06e5a8d9",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a486d77_d22c034d",
        "filename": "tools/module_manager.py",
        "patchSetId": 1
      },
      "lineNbr": 79,
      "author": {
        "id": 304
      },
      "writtenOn": "2016-03-16T13:46:41Z",
      "side": 1,
      "message": "Does this work with the path? if you are insmodding the module basename??\n\nbest way to test is with vanilla OVS",
      "revId": "dc07339e70cce373b7948c01ec39a4fb06e5a8d9",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a486d77_b2d86754",
        "filename": "tools/module_manager.py",
        "patchSetId": 1
      },
      "lineNbr": 79,
      "author": {
        "id": 1306
      },
      "writtenOn": "2016-03-16T14:40:26Z",
      "side": 1,
      "message": "In case of module groups, the path to the module is passed through \"path_preffix\" and specific subdirectory (suffix) within this prefix is passed as first item in the tuple stored in module_group.\n\nThis code only collects all these data into exact module name with the full path and inserts it through ismod.\n\nThis method is used to insert DPDK drivers (igb_uio) and vhost module drivers, which are stored within dpdk directory.\n\n\u0027DPDK_MODULES\u0027: [(\u0027kmod\u0027, \u0027igb_uio\u0027)],\n\n\u0027VHOST_MODULE\u0027: [(\u0027eventfd_link\u0027, \u0027eventfd_link\u0027)],\n\nInsertion of both groups above was successfully tested.\n\nOpenvswitch module is inserted by standard insert_modules method, it means it is listed inside VSWITCH_VANILLA_KERNEL_MODULES with its full path. It has been also successfully tested.",
      "parentUuid": "1a486d77_d22c034d",
      "revId": "dc07339e70cce373b7948c01ec39a4fb06e5a8d9",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a486d77_12adfb88",
        "filename": "tools/module_manager.py",
        "patchSetId": 1
      },
      "lineNbr": 79,
      "author": {
        "id": 304
      },
      "writtenOn": "2016-03-16T15:14:33Z",
      "side": 1,
      "message": "sorry to be pedantic :D \nI understand how the path is being built up... \nbut I see in insert_module we extract the module_base_name which I assume is stripping away the path to the module? so this is why I\u0027m finding it hard to see that the module is being insmodded from the full path\nBut if you say it works, I believe you :D",
      "parentUuid": "1a486d77_b2d86754",
      "revId": "dc07339e70cce373b7948c01ec39a4fb06e5a8d9",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a486d77_92268b67",
        "filename": "tools/module_manager.py",
        "patchSetId": 1
      },
      "lineNbr": 116,
      "author": {
        "id": 304
      },
      "writtenOn": "2016-03-16T13:50:45Z",
      "side": 1,
      "message": "I think you could be removing a whole tree of dependencies here... We have the exact list of modules we inserted... can\u0027t we just remove them if they are dependant on the module we are trying to remove and are in the module list?",
      "revId": "dc07339e70cce373b7948c01ec39a4fb06e5a8d9",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a486d77_12f17bcd",
        "filename": "tools/module_manager.py",
        "patchSetId": 1
      },
      "lineNbr": 116,
      "author": {
        "id": 1306
      },
      "writtenOn": "2016-03-16T14:40:26Z",
      "side": 1,
      "message": "Yes, this is potentially dangerous and there is already an error report under investigation. It is more likely, that this part will be abandoned.\n\nThe idea was to free all modules hooked to the module we are about to remove. In another words, to avoid failure of module removal, caused by \"module in use\" situation.\n\nAlso modprobe has some means to remove module together with its children (if they are unused), but it didn\u0027t worked for me. Thus I tried to do it manually.",
      "parentUuid": "1a486d77_92268b67",
      "revId": "dc07339e70cce373b7948c01ec39a4fb06e5a8d9",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    }
  ]
}